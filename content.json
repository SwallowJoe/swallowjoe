{"meta":{"title":"SwallowJoeçš„åšå®¢","subtitle":"Be a real go-getter,<br>NEVER SETTLE!","description":"å›å­çŸ¥å‘½ä¸æƒ§ï¼Œæ—¥æ—¥è‡ªæ–°","author":"SwallowJoe","url":"https://swallowjoe.github.io","root":"/"},"pages":[{"title":"","date":"2022-02-26T09:28:27.221Z","updated":"2022-02-26T09:28:27.221Z","comments":true,"path":"404/index.html","permalink":"https://swallowjoe.github.io/404/index.html","excerpt":"","text":"layout: falsecomments: falsetitle: 404permalink: &#x2F;404 å¹½çµ404é¡µé¢ html,body{background:#28254C;font-family:'Ubuntu';}*{box-sizing:border-box;}.box{width:350px;height:100%;max-height:600px;min-height:450px;background:#332F63;border-radius:20px;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);padding:30px 50px;}.box .box__ghost{padding:15px 25px 25px;position:absolute;left:50%;top:30%;transform:translate(-50%,-30%);}.box .box__ghost .symbol:nth-child(1){opacity:.2;animation:shine 4s ease-in-out 3s infinite;}.box .box__ghost .symbol:nth-child(1):before,.box .box__ghost .symbol:nth-child(1):after{content:'';width:12px;height:4px;background:#fff;position:absolute;border-radius:5px;bottom:65px;left:0;}.box .box__ghost .symbol:nth-child(1):before{transform:rotate(45deg);}.box .box__ghost .symbol:nth-child(1):after{transform:rotate(-45deg);}.box .box__ghost .symbol:nth-child(2){position:absolute;left:-5px;top:30px;height:18px;width:18px;border:4px solid;border-radius:50%;border-color:#fff;opacity:.2;animation:shine 4s ease-in-out 1.3s infinite;}.box .box__ghost .symbol:nth-child(3){opacity:.2;animation:shine 3s ease-in-out .5s infinite;}.box .box__ghost .symbol:nth-child(3):before,.box .box__ghost .symbol:nth-child(3):after{content:'';width:12px;height:4px;background:#fff;position:absolute;border-radius:5px;top:5px;left:40px;}.box .box__ghost .symbol:nth-child(3):before{transform:rotate(90deg);}.box .box__ghost .symbol:nth-child(3):after{transform:rotate(180deg);}.box .box__ghost .symbol:nth-child(4){opacity:.2;animation:shine 6s ease-in-out 1.6s infinite;}.box .box__ghost .symbol:nth-child(4):before,.box .box__ghost .symbol:nth-child(4):after{content:'';width:15px;height:4px;background:#fff;position:absolute;border-radius:5px;top:10px;right:30px;}.box .box__ghost .symbol:nth-child(4):before{transform:rotate(45deg);}.box .box__ghost .symbol:nth-child(4):after{transform:rotate(-45deg);}.box .box__ghost .symbol:nth-child(5){position:absolute;right:5px;top:40px;height:12px;width:12px;border:3px solid;border-radius:50%;border-color:#fff;opacity:.2;animation:shine 1.7s ease-in-out 7s infinite;}.box .box__ghost .symbol:nth-child(6){opacity:.2;animation:shine 2s ease-in-out 6s infinite;}.box .box__ghost .symbol:nth-child(6):before,.box .box__ghost .symbol:nth-child(6):after{content:'';width:15px;height:4px;background:#fff;position:absolute;border-radius:5px;bottom:65px;right:-5px;}.box .box__ghost .symbol:nth-child(6):before{transform:rotate(90deg);}.box .box__ghost .symbol:nth-child(6):after{transform:rotate(180deg);}.box .box__ghost .box__ghost-container{background:#fff;width:100px;height:100px;border-radius:100px 100px 0 0;position:relative;margin:0 auto;animation:upndown 3s ease-in-out infinite;}.box .box__ghost .box__ghost-container .box__ghost-eyes{position:absolute;left:50%;top:45%;height:12px;width:70px;}.box .box__ghost .box__ghost-container .box__ghost-eyes .box__eye-left{width:12px;height:12px;background:#332F63;border-radius:50%;margin:0 10px;position:absolute;left:0;}.box .box__ghost .box__ghost-container .box__ghost-eyes .box__eye-right{width:12px;height:12px;background:#332F63;border-radius:50%;margin:0 10px;position:absolute;right:0;}.box .box__ghost .box__ghost-container .box__ghost-bottom{display:flex;position:absolute;top:100%;left:0;right:0;}.box .box__ghost .box__ghost-container .box__ghost-bottom div{flex-grow:1;position:relative;top:-10px;height:20px;border-radius:100%;background-color:#fff;}.box .box__ghost .box__ghost-container .box__ghost-bottom div:nth-child(2n){top:-12px;margin:0 -0px;border-top:15px solid #332F63;background:transparent;}.box .box__ghost .box__ghost-shadow{height:20px;box-shadow:0 50px 15px 5px #3B3769;border-radius:50%;margin:0 auto;animation:smallnbig 3s ease-in-out infinite;}.box .box__description{position:absolute;bottom:30px;left:50%;transform:translateX(-50%);}.box .box__description .box__description-container{color:#fff;text-align:center;width:200px;font-size:16px;margin:0 auto;}.box .box__description .box__description-container .box__description-title{font-size:24px;letter-spacing:.5px;}.box .box__description .box__description-container .box__description-text{color:#8C8AA7;line-height:20px;margin-top:20px;}.box .box__description .box__button{display:block;position:relative;background:#FF5E65;border:1px solid transparent;border-radius:50px;height:50px;text-align:center;text-decoration:none;color:#fff;line-height:50px;font-size:18px;padding:0 70px;white-space:nowrap;margin-top:25px;transition:background .5s ease;overflow:hidden;}.box .box__description .box__button:before{content:'';position:absolute;width:20px;height:100px;background:#fff;bottom:-25px;left:0;border:2px solid #fff;transform:translateX(-50px) rotate(45deg);transition:transform .5s ease;}.box .box__description .box__button:hover{background:transparent;border-color:#fff;}.box .box__description .box__button:hover:before{transform:translateX(250px) rotate(45deg);}@keyframes upndown{0%{transform:translateY(5px);}50%{transform:translateY(15px);}100%{transform:translateY(5px);}}@keyframes smallnbig{0%{width:90px;}50%{width:100px;}100%{width:90px;}}@keyframes shine{0%{opacity:.2;}25%{opacity:.1;}50%{opacity:.2;}100%{opacity:.2;}} 404é”™è¯¯ï¼ çœ‹æ¥æˆ‘ä»¬æ‰¾ä¸åˆ°ä½ è¦æ‰¾çš„é‚£ä¸€é¡µ è¿”å› var pageX =$(document).width();var pageY =$(document).height();var mouseY=0;var mouseX=0;$(document).mousemove(function(event ) {mouseY =event.pageY;yAxis =(pageY/2-mouseY)/pageY*300;mouseX =event.pageX / -pageX;xAxis =-mouseX *100 - 100;$('.box__ghost-eyes').css({'transform':'translate('+ xAxis +'%,-'+ yAxis +'%)' });});"}],"posts":[{"title":"Vulkanå…¥é—¨(2)-åˆ›å»ºVulkanç¤ºä¾‹åŠéªŒè¯å±‚","slug":"Vulkanå…¥é—¨-2-åˆ›å»ºVulkanç¤ºä¾‹åŠéªŒè¯å±‚","date":"2022-02-26T14:24:59.000Z","updated":"2022-02-26T14:36:43.896Z","comments":true,"path":"2022/02/26/Vulkanå…¥é—¨-2-åˆ›å»ºVulkanç¤ºä¾‹åŠéªŒè¯å±‚/","link":"","permalink":"https://swallowjoe.github.io/2022/02/26/Vulkan%E5%85%A5%E9%97%A8-2-%E5%88%9B%E5%BB%BAVulkan%E7%A4%BA%E4%BE%8B%E5%8F%8A%E9%AA%8C%E8%AF%81%E5%B1%82/","excerpt":"","text":"å‚è€ƒèµ„æ–™ ç®€è¿° ä¸€. åˆ›å»º vulkan å®ä¾‹ 1.1 åˆ›å»º Window å®ä¾‹ 1.2 åˆ›å»º Vulkan å®ä¾‹ äºŒ. éªŒè¯å±‚(Validation layers) 2.1 ä»€ä¹ˆæ˜¯ Validation layersï¼Ÿ 2.2 Validation layersç¤ºä¾‹ 2.3 å¯ç”¨éªŒè¯å±‚ 2.4 æ¶ˆæ¯å›è°ƒ 2.4.1 è°ƒè¯•å›è°ƒå‡½æ•° debugCallback 2.4.2 æ³¨å†Œè°ƒè¯•å›è°ƒ ä¸‰. ä»£ç  3.1 Makefile 3.2 main.cpp å‚è€ƒèµ„æ–™ https://github.com/KhronosGroup/Vulkan-Docs https://www.khronos.org/registry/vulkan/specs/1.1-extensions/html/vkspec.html#vkCreateInstance https://github.com/SaschaWillems/Vulkan/blob/master/base/vulkanexamplebase.h ç®€è¿°æœ¬æ–‡ä¸»è¦æ˜¯å®ç°Vulkan Tutorial.pdfæ–‡æ¡£ä¸­çš„Base Code, Instanceå’ŒValidation Layerséƒ¨åˆ†ã€‚ ä¸€. åˆ›å»º vulkan å®ä¾‹1.1 åˆ›å»º Window å®ä¾‹å…ˆåˆ›å»ºä¸ª window çª—å£ 12345678910111213141516void initWindow() &#123; // ç¬¬ä¸€æ­¥ä¸€å®šæ˜¯å…ˆåˆå§‹åŒ–GLFWåº“. glfwInit(); // å› ä¸ºGLFWæœ€åˆæ˜¯ä¸ºåˆ›å»ºOpenGLä¸Šä¸‹æ–‡è€Œè®¾è®¡çš„ï¼Œ // æ‰€ä»¥æˆ‘ä»¬éœ€è¦å‘Šè¯‰å®ƒä¸è¦é€šè¿‡åç»­è°ƒç”¨åˆ›å»ºOpenGLä¸Šä¸‹æ–‡ï¼šGLFW_NO_API glfwWindowHint(GLFW_CLIENT_API, GLFW_NO_API); // å› ä¸ºå¤„ç†å¤§å°å¯å˜çš„çª—å£æ¯”è¾ƒå¤æ‚ï¼Œæš‚æ—¶å…ˆè®©çª—å£ä¸å¯å˜ glfwWindowHint(GLFW_RESIZABLE, GLFW_FALSE); // åˆ›å»ºçª—å£ // GLFWwindow *glfwCreateWindow(int width, int height, const char *title, GLFWmonitor *monitor, GLFWwindow *share) window = glfwCreateWindow(WIDTH, HEIGHT, WINDOW_TITLE, nullptr, nullptr);&#125; 1.2 åˆ›å»º Vulkan å®ä¾‹ åˆ›å»º VkApplicationInfo ç»“æ„ä½“å˜é‡ï¼Œå‚æ•°å¯é€‰ åˆ›å»º VkInstanceCreateInfo ç»“æ„ä½“å˜é‡ï¼Œå¿…é¡»æŒ‡æ˜ ä½¿ç”¨ GLFW (glfwGetRequiredInstanceExtensions) åˆ›å»º glfwExtensions, ä»¥ä¾¿ä¸ºGLFWçª—å£åˆ›å»ºVulkan surface è°ƒç”¨ vkCreateInstance, åˆ›å»º vulkan å®ä¾‹ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950void createInstance() &#123; // åˆ›å»ºä¸€ä¸ªå®ä¾‹é¦–å…ˆå¿…é¡»å¡«å†™ä¸€ä¸ªåŒ…å«æœ‰å…³æˆ‘ä»¬åº”ç”¨ç¨‹åºçš„ä¿¡æ¯çš„ç»“æ„: VkApplicationInfo // è¿™äº›æ•°æ®åœ¨æŠ€æœ¯ä¸Šæ˜¯å¯é€‰çš„ï¼Œä½†å®ƒå¯ä»¥ä¸ºé©±åŠ¨ç¨‹åºæä¾›ä¸€äº›æœ‰ç”¨çš„ä¿¡æ¯ï¼Œä»¥ä¾¿é’ˆå¯¹æˆ‘ä»¬çš„ç‰¹å®šåº”ç”¨è¿›è¡Œä¼˜åŒ– VkApplicationInfo appInfo = &#123;&#125;; // Vulkanä¸­çš„è®¸å¤šç»“æ„è¦æ±‚åœ¨sTypeæˆå‘˜ä¸­æ˜ç¡®æŒ‡å®šç±»å‹ã€‚ // è¿™ä¹Ÿæ˜¯å…·æœ‰pNextæˆå‘˜çš„è®¸å¤šç»“æ„ä¸­çš„ä¸€ä¸ªï¼Œè¯¥æˆå‘˜å¯ä»¥åœ¨å°†æ¥æŒ‡å‘æ‰©å±•ä¿¡æ¯ã€‚ appInfo.sType = VK_STRUCTURE_TYPE_APPLICATION_INFO; appInfo.pApplicationName = &quot;Hello Triangle&quot;; appInfo.applicationVersion = VK_MAKE_VERSION(1, 1, 0); appInfo.pEngineName = &quot;No Engine&quot;; appInfo.engineVersion = VK_MAKE_VERSION(1, 1, 0); appInfo.apiVersion = VK_API_VERSION_1_1; // Vulkanä¸­çš„å¾ˆå¤šä¿¡æ¯éƒ½æ˜¯é€šè¿‡ç»“æ„è€Œä¸æ˜¯å‡½æ•°å‚æ•°ä¼ é€’çš„ï¼Œ // æˆ‘ä»¬å¿…é¡»å†å¡«å……ä¸€ä¸ªç»“æ„ä½“ VkInstanceCreateInfo æ¥ä¸ºåˆ›å»ºå®ä¾‹æä¾›è¶³å¤Ÿçš„ä¿¡æ¯ã€‚ // VkInstanceCreateInfoç»“æ„æ˜¯å¿…é¡»æŒ‡æ˜çš„ï¼Œå®ƒå‘Šè¯‰Vulkané©±åŠ¨ç¨‹åºæˆ‘ä»¬æƒ³è¦ä½¿ç”¨å“ªäº›å…¨å±€æ‰©å±•å’ŒéªŒè¯å±‚ã€‚ VkInstanceCreateInfo createInfo = &#123;&#125;; createInfo.sType = VK_STRUCTURE_TYPE_INSTANCE_CREATE_INFO; createInfo.pNext = nullptr; createInfo.pApplicationInfo = &amp;appInfo; // å‰ä¸¤ä¸ªå‚æ•°å¾ˆç®€å•ã€‚ // Vulkanæ˜¯ä¸€ä¸ªä¸å¹³å°æ— å…³çš„APIï¼Œè¿™æ„å‘³ç€éœ€è¦ä¸€ä¸ªä¸çª—å£ç³»ç»Ÿæ¥å£çš„æ‰©å±•ã€‚ // GLFWæœ‰ä¸€ä¸ªæ–¹ä¾¿çš„å†…ç½®å‡½æ•°ï¼Œå®ƒè¿”å›å®ƒéœ€è¦åšçš„æ‰©å±•ï¼Œæˆ‘ä»¬å¯ä»¥ä¼ é€’ç»™ç»“æ„ä½“ï¼šVkInstanceCreateInfo uint32_t glfwExtensionCount = 0; const char** glfwExtensions; // è¿”å›GLFWæ‰€éœ€çš„Vulkanå®ä¾‹æ‰©å±•ã€‚ // æ­¤å‡½æ•°è¿”å›GLFWæ‰€éœ€çš„Vulkanå®ä¾‹æ‰©å±•åçš„æ•°ç»„ï¼Œä»¥ä¾¿ä¸ºGLFWçª—å£åˆ›å»ºVulkan surfaceã€‚ // å¦‚æœæˆåŠŸï¼Œåˆ—è¡¨å°†å§‹ç»ˆåŒ…å«`VK_KHR_surface`ï¼Œå› æ­¤å¦‚æœæ‚¨ä¸éœ€è¦ä»»ä½•å…¶ä»–æ‰©å±•ï¼Œåˆ™å¯ä»¥å°†æ­¤åˆ—è¡¨ç›´æ¥ä¼ é€’ç»™`VkInstanceCreateInfo`ç»“æ„ã€‚ // å¦‚æœæœºå™¨ä¸Šæ²¡æœ‰Vulkanï¼Œåˆ™æ­¤å‡½æ•°è¿”å›â€œNULLâ€å¹¶ç”Ÿæˆ GLFW_API_UNAVAILABLEé”™è¯¯ã€‚ glfwExtensions = glfwGetRequiredInstanceExtensions(&amp;glfwExtensionCount); createInfo.enabledExtensionCount = glfwExtensionCount; // createInfo.ppEnabledLayerNames = glfwExtensions; // ç¬”è€…æ›¾åœ¨è¿™é‡Œæ ½äº†ä¸ªè·Ÿå¤´ï¼Œå†™é”™äº†ã€‚å¦‚ä¸Šå†™ï¼Œç¼–è¯‘ä¸å‡ºé—®é¢˜ï¼Œä½†è¿è¡Œæ—¶ä¼šæŠ¥ Segmentation fault (core dumped) // æ‰“å°å †æ ˆï¼Œçœ‹äº†åŠå¤©ï¼Œæ‰å‘ç°çš„ï¼Œå¼•ä»¥ä¸ºæˆ’ï¼Œä¸è¿‡è¿™ä¸¤å˜é‡åå­—å¾ˆåƒã€‚ createInfo.ppEnabledExtensionNames = glfwExtensions; // ç»“æ„ä½“çš„æœ€åä¸¤ä¸ªæˆå‘˜ç¡®å®šè¦å¯ç”¨çš„å…¨å±€éªŒè¯å±‚ã€‚ createInfo.enabledLayerCount = 0; // VkResult vkCreateInstance(const VkInstanceCreateInfo *pCreateInfo, const VkAllocationCallbacks *pAllocator, VkInstance *pInstance) VkResult res = vkCreateInstance(&amp;createInfo, nullptr, &amp;instance); if (res != VK_SUCCESS) &#123; throw std::runtime_error(&quot;failed to create instance!&quot;); &#125;&#125; äºŒ. éªŒè¯å±‚(Validation layers)2.1 ä»€ä¹ˆæ˜¯ Validation layersï¼ŸVulkan APIå›´ç»•æœ€å°é©±åŠ¨ç¨‹åºå¼€é”€çš„æƒ³æ³•è€Œè®¾è®¡ï¼Œè¯¥ç›®æ ‡çš„ä¸€ä¸ªè¡¨ç°å½¢å¼æ˜¯é»˜è®¤æƒ…å†µä¸‹APIä¸­çš„é”™è¯¯æ£€æŸ¥éå¸¸æœ‰é™ã€‚å³ä½¿æ˜¯å°†æšä¸¾è®¾ç½®ä¸ºä¸æ­£ç¡®çš„å€¼æˆ–å°†ç©ºæŒ‡é’ˆä¼ é€’ç»™æ‰€éœ€å‚æ•°è¿™æ ·ç®€å•çš„é”™è¯¯é€šå¸¸ä¹Ÿä¸ä¼šè¢«æ˜¾å¼å¤„ç†ï¼Œåªä¼šå¯¼è‡´å´©æºƒæˆ–æœªå®šä¹‰çš„è¡Œä¸ºã€‚è¿™ä¸€ç‚¹ï¼Œç¬”è€…å·²ç»æ·±åˆ»ä½“ä¼šåˆ°äº†ï¼Œ(â•¯ï¹â•°)å› ä¸ºVulkanè¦æ±‚ä½ å¯¹ä½ æ‰€åšçš„ä¸€åˆ‡éƒ½éå¸¸æ˜ç¡®ï¼Œæ‰€ä»¥å¾ˆå®¹æ˜“çŠ¯å¾ˆå¤šå°é”™è¯¯ï¼Œä¾‹å¦‚ä½¿ç”¨æ–°çš„GPUåŠŸèƒ½è€Œå¿˜è®°åœ¨é€»è¾‘è®¾å¤‡åˆ›å»ºæ—¶è¯·æ±‚å®ƒã€‚ ä½†æ˜¯ï¼Œè¿™å¹¶ä¸æ„å‘³ç€æ— æ³•å°†è¿™äº›æ£€æŸ¥æ·»åŠ åˆ°APIä¸­ã€‚Vulkanä¸ºè¿™ç§ç§°ä¸ºéªŒè¯å±‚çš„ç³»ç»Ÿå¼•å…¥äº†ä¸€ä¸ªä¼˜é›…çš„ç³»ç»Ÿ: Validation layers.éªŒè¯å±‚æ˜¯å¯é€‰ç»„ä»¶ï¼Œå®ƒæŒ‚æ¥åˆ°Vulkanå‡½æ•°è°ƒç”¨ä»¥åº”ç”¨å…¶ä»–æ“ä½œã€‚ éªŒè¯å±‚ä¸­çš„å¸¸è§æ“ä½œæ˜¯ï¼š æ ¹æ®è§„èŒƒæ£€æŸ¥å‚æ•°å€¼ä»¥æ£€æµ‹è¯¯ç”¨ è·Ÿè¸ªå¯¹è±¡çš„åˆ›å»ºå’Œé”€æ¯ä»¥æŸ¥æ‰¾èµ„æºæ³„æ¼ é€šè¿‡è·Ÿè¸ªè°ƒç”¨çš„çº¿ç¨‹æ¥æ£€æŸ¥çº¿ç¨‹å®‰å…¨æ€§ å°†æ¯ä¸ªè°ƒç”¨åŠå…¶å‚æ•°è®°å½•åˆ°æ ‡å‡†è¾“å‡ºæ–¹ä¾¿è°ƒè¯• è·Ÿè¸ªVulkanè¦æ±‚è¿›è¡Œæ€§èƒ½åˆ†æå’Œé‡æ”¾ 2.2 Validation layersç¤ºä¾‹123456789101112VkResult vkCreateInstance( const VkInstanceCreateInfo* pCreateInfo, const VkAllocationCallbacks* pAllocator, VkInstance* instance) &#123; if (pCreateInfo == nullptr || instance == nullptr) &#123; log(&quot;Null pointer passed to required parameter!&quot;); return VK_ERROR_INITIALIZATION_FAILED; &#125; return real_vkCreateInstance(pCreateInfo, pAllocator, instance);&#125; æ¯”å¦‚ä¸Šé¢çš„vkCreateInstanceä¸­çš„ifè¯­å¥ã€‚å®˜æ–¹æ–‡æ¡£ä¸Šå¦‚æ­¤è¯´ï¼š 1234567891011è¿™äº›éªŒè¯å±‚å¯ä»¥è‡ªç”±å †å ï¼Œä»¥åŒ…å«æ‚¨æ„Ÿå…´è¶£çš„æ‰€æœ‰è°ƒè¯•åŠŸèƒ½ã€‚æ‚¨å¯ä»¥ç®€å•åœ°ä¸ºè°ƒè¯•ç‰ˆæœ¬å¯ç”¨éªŒè¯å±‚ï¼Œå¹¶ä¸ºå‘å¸ƒç‰ˆæœ¬å®Œå…¨ç¦ç”¨å®ƒä»¬ï¼Œè¿™å°†ä¸ºæ‚¨æä¾›ä¸¤å…¨å…¶ç¾çš„ä¼˜åŠ¿ï¼Vulkanæ²¡æœ‰å†…ç½®ä»»ä½•éªŒè¯å±‚ï¼Œä½†LunarG Vulkan SDKæä¾›äº†ä¸€ç»„å¾ˆå¥½çš„å±‚æ¥æ£€æŸ¥å¸¸è§é”™è¯¯ã€‚å®ƒä»¬ä¹Ÿæ˜¯å®Œå…¨å¼€æºçš„ï¼Œå› æ­¤æ‚¨å¯ä»¥æ£€æŸ¥å®ƒä»¬æ£€æŸ¥å’Œè´¡çŒ®çš„é”™è¯¯ç±»å‹ã€‚ä½¿ç”¨éªŒè¯å±‚æ˜¯é¿å…åº”ç”¨ç¨‹åºå› æ„å¤–ä¾èµ–æœªå®šä¹‰è¡Œä¸ºè€Œç ´åä¸åŒé©±åŠ¨ç¨‹åºçš„æœ€ä½³æ–¹æ³•ã€‚éªŒè¯å±‚åªæœ‰åœ¨å·²å®‰è£…åˆ°ç³»ç»Ÿä¸Šæ—¶æ‰èƒ½ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼ŒLunarGéªŒè¯å±‚ä»…é€‚ç”¨äºå®‰è£…äº†Vulkan SDKçš„PCã€‚Vulkanä¸­ä»¥å‰æœ‰ä¸¤ç§ä¸åŒç±»å‹çš„éªŒè¯å±‚ï¼šå®ä¾‹å’Œè®¾å¤‡ç‰¹å®šã€‚æˆ‘ä»¬çš„æƒ³æ³•æ˜¯ï¼Œå®ä¾‹å±‚åªä¼šæ£€æŸ¥ä¸å…¨å±€Vulkanå¯¹è±¡ï¼ˆå¦‚å®ä¾‹ï¼‰ç›¸å…³çš„è°ƒç”¨ï¼Œè€Œè®¾å¤‡ç‰¹å®šå±‚åªä¼šæ£€æŸ¥ä¸ç‰¹å®šGPUç›¸å…³çš„è°ƒç”¨ã€‚ç°åœ¨å·²å¼ƒç”¨ç‰¹å®šäºè®¾å¤‡çš„å±‚ï¼Œè¿™æ„å‘³ç€å®ä¾‹éªŒè¯å±‚é€‚ç”¨äºæ‰€æœ‰Vulkanè°ƒç”¨ã€‚è§„èŒƒæ–‡æ¡£ä»å»ºè®®æ‚¨åœ¨è®¾å¤‡çº§åˆ«å¯ç”¨éªŒè¯å±‚ä»¥åŠå…¼å®¹æ€§ï¼Œè¿™æ˜¯æŸäº›å®ç°æ‰€éœ€çš„ã€‚ 2.3 å¯ç”¨éªŒè¯å±‚å¦‚ä½•å¯ç”¨Vulkan SDKæä¾›çš„æ ‡å‡†è¯Šæ–­å±‚? å°±åƒæ‰©å±•ä¸€æ ·ï¼Œéœ€è¦é€šè¿‡æŒ‡å®šå…¶åç§°æ¥å¯ç”¨éªŒè¯å±‚ã€‚æ‰€æœ‰æœ‰ç”¨çš„æ ‡å‡†éªŒè¯éƒ½æ†ç»‘åœ¨SDKä¸­åŒ…å«çš„å±‚ä¸­ï¼Œç§°ä¸ºVK_LAYER_KHRONOS_validationã€‚è®©æˆ‘ä»¬é¦–å…ˆå‘ç¨‹åºæ·»åŠ ä¸¤ä¸ªé…ç½®å˜é‡ï¼Œä»¥æŒ‡å®šè¦å¯ç”¨çš„å±‚ä»¥åŠæ˜¯å¦å¯ç”¨å®ƒä»¬ã€‚ æˆ‘å·²ç»é€‰æ‹©å°†è¯¥å€¼ä½œä¸ºç¨‹åºæ˜¯å¦åœ¨è°ƒè¯•æ¨¡å¼ä¸‹ç¼–è¯‘ã€‚NDEBUGå®æ˜¯C ++æ ‡å‡†çš„ä¸€éƒ¨åˆ†ï¼Œæ„å‘³ç€â€œä¸è°ƒè¯•â€ã€‚ 123456789const std::vector&lt;const char*&gt; validationLayers = &#123; &quot;VK_LAYER_KHRONOS_validation&quot;&#125;;#ifdef NDEBUG const bool enableValidationLayers = false;#else const bool enableValidationLayers = true;#endif 2.4 æ¶ˆæ¯å›è°ƒä»…å¯ç”¨è¿™äº›å±‚å¹¶æ²¡æœ‰å¤šå¤§å¸®åŠ©ï¼Œå› ä¸ºå®ƒä»¬ç›®å‰æ— æ³•å°†è°ƒè¯•æ¶ˆæ¯ä¸­ç»§å›æˆ‘ä»¬çš„ç¨‹åºã€‚è¦æ¥æ”¶è¿™äº›æ¶ˆæ¯ï¼Œæˆ‘ä»¬å¿…é¡»è®¾ç½®ä¸€ä¸ªå¸¦å›è°ƒçš„è°ƒè¯•ä¿¡ä½¿ï¼Œè¿™éœ€è¦VK_EXT_debug_utilsæ‰©å±•ã€‚æˆ‘ä»¬å°†é¦–å…ˆåˆ›å»ºä¸€ä¸ªgetRequiredExtensionså‡½æ•°ï¼Œæ ¹æ®æ˜¯å¦å¯ç”¨éªŒè¯å±‚è¿”å›æ‰€éœ€çš„æ‰©å±•ååˆ—è¡¨ï¼š 12345678910111213std::vector&lt;const char*&gt; getRequiredExtensions() &#123; uint32_t glfwExtensionCount = 0; const char** glfwExtensions; glfwExtensions = glfwGetRequiredInstanceExtensions(&amp;glfwExtensionCount); std::vector&lt;const char*&gt; extensions(glfwExtensions, glfwExtensions + glfwExtensionCount); if (enableValidationLayers) &#123; extensions.push_back(VK_EXT_DEBUG_UTILS_EXTENSION_NAME); &#125; return extensions;&#125; GLFWæŒ‡å®šçš„æ‰©å±•å§‹ç»ˆæ˜¯å¿…éœ€çš„ï¼Œä½†æœ‰æ¡ä»¶åœ°æ·»åŠ äº†è°ƒè¯•ä¿¡ä½¿æ‰©å±•(VK_EXT_debug_utils)ã€‚è¯·æ³¨æ„ï¼Œåœ¨è¿™é‡Œä½¿ç”¨äº†VK_EXT_DEBUG_UTILS_EXTENSION_NAMEå®ï¼Œå®ƒç­‰äºæ–‡å­—å­—ç¬¦ä¸²â€œVK_EXT_debug_utilsâ€ã€‚ ä½¿ç”¨æ­¤å®å¯ä»¥é¿å…æ‹¼å†™é”™è¯¯ã€‚æˆ‘ä»¬ç°åœ¨å¯ä»¥åœ¨createInstanceä¸­ä½¿ç”¨æ­¤å‡½æ•°ï¼š 123auto extensions = getRequiredExtensions();createInfo.enabledExtensionCount = static_cast&lt;uint32_t&gt;(extensions.size());createInfo.ppEnabledExtensionNames = extensions.data(); 2.4.1 è°ƒè¯•å›è°ƒå‡½æ•° debugCallbackç°åœ¨è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹è°ƒè¯•å›è°ƒå‡½æ•°çš„æ ·å­ã€‚ä½¿ç”¨PFN_vkDebugUtilsMessengerCallbackEXTåŸå‹æ·»åŠ ä¸€ä¸ªåä¸ºdebugCallbackçš„æ–°é™æ€æˆå‘˜å‡½æ•°ã€‚VKAPI_ATTRå’ŒVKAPI_CALLç¡®ä¿è¯¥å‡½æ•°å…·æœ‰Vulkanè°ƒç”¨å®ƒçš„æ­£ç¡®ç­¾åã€‚ 12345678910static VKAPI_ATTR VkBool32 VKAPI_CALL debugCallback( VkDebugUtilsMessageSeverityFlagBitsEXT messageSeverity, VkDebugUtilsMessageTypeFlagsEXT messageType, const VkDebugUtilsMessengerCallbackDataEXT* pCallbackData, void* pUserData) &#123; std::cerr &lt;&lt; &quot;validation layer: &quot; &lt;&lt; pCallbackData-&gt;pMessage&lt;&lt; std::endl; return VK_FALSE;&#125; ç¬¬ä¸€ä¸ªå‚æ•°: VkDebugUtilsMessageSeverityFlagBitsEXT æŒ‡æ˜äº†æ¶ˆæ¯çš„ä¸¥é‡ç¨‹åº¦â€¢VK_DEBUG_UTILS_MESSAGE_SEVERITY_VERBOSE_BIT_EXTï¼šè¯Šæ–­æ¶ˆæ¯â€¢VK_DEBUG_UTILS_MESSAGE_SEVERITY_INFO_BIT_EXTï¼šä¿¡æ¯æ€§æ¶ˆæ¯ï¼Œå¦‚åˆ›å»ºèµ„æºâ€¢VK_DEBUG_UTILS_MESSAGE_SEVERITY_WARNING_BIT_EXTï¼šæœ‰å…³è¡Œä¸ºçš„æ¶ˆæ¯ä¸ä¸€å®šæ˜¯é”™è¯¯ï¼Œä½†å¾ˆå¯èƒ½æ˜¯åº”ç”¨ç¨‹åºä¸­çš„é”™è¯¯â€¢VK_DEBUG_UTILS_MESSAGE_SEVERITY_ERROR_BIT_EXTï¼šæœ‰å…³æ— æ•ˆè¡Œä¸ºçš„æ¶ˆæ¯ï¼Œå¯èƒ½å¯¼è‡´å´©æºƒå¯ä»¥æ ¹æ®è¿™ä¸ªå‚æ•°è¿‡æ»¤æ‰€éœ€çš„ä¿¡æ¯ã€‚ ç¬¬äºŒä¸ªå‚æ•°: VkDebugUtilsMessageTypeFlagsEXT æŒ‡æ˜äº†æ¶ˆæ¯çš„ç±»å‹â€¢VK_DEBUG_UTILS_MESSAGE_TYPE_GENERAL_BIT_EXTï¼šå‘ç”Ÿäº†ä¸è§„èŒƒæˆ–æ€§èƒ½æ— å…³çš„æŸäº›äº‹ä»¶â€¢VK_DEBUG_UTILS_MESSAGE_TYPE_VALIDATION_BIT_EXTï¼šå‘ç”Ÿäº†è¿åè§„èŒƒæˆ–è¡¨æ˜å¯èƒ½å­˜åœ¨é”™è¯¯çš„äº‹æƒ…â€¢VK_DEBUG_UTILS_MESSAGE_TYPE_PERFORMANCE_BIT_EXTï¼šæ½œåœ¨çš„éæœ€ä½³ä½¿ç”¨Vulkan ç¬¬ä¸‰ä¸ªå‚æ•°: VkDebugUtilsMessengerCallbackDataEXT è¿™ä¸ªç»“æ„ä½“åŒ…å«äº†æ¶ˆæ¯æ›´å¤šçš„ç»†èŠ‚å†…å®¹â€¢pMessageï¼šè°ƒè¯•æ¶ˆæ¯ä¸ºä»¥ç©ºå­—ç¬¦ç»“å°¾çš„å­—ç¬¦ä¸²â€¢pObjectsï¼šä¸æ¶ˆæ¯ç›¸å…³çš„Vulkanå¯¹è±¡å¥æŸ„æ•°ç»„â€¢object Countï¼šæ•°ç»„ä¸­çš„å¯¹è±¡æ•° ç¬¬å››ä¸ªå‚æ•°: pUserData åŒ…å«åœ¨å›è°ƒè®¾ç½®æœŸé—´æŒ‡å®šçš„æŒ‡é’ˆï¼Œå¹¶å…è®¸æ‚¨å°†è‡ªå·±çš„æ•°æ®ä¼ é€’ç»™å®ƒã€‚ å›è°ƒè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºæ˜¯å¦åº”è¯¥ä¸­æ­¢è§¦å‘éªŒè¯å±‚æ¶ˆæ¯çš„Vulkanè°ƒç”¨ã€‚å¦‚æœå›è°ƒè¿”å›trueï¼Œåˆ™è°ƒç”¨å°†å› VK_ERROR_VALIDATION_FAILED_EXTé”™è¯¯è€Œä¸­æ­¢ã€‚è¿™é€šå¸¸ä»…ç”¨äºæµ‹è¯•éªŒè¯å±‚æœ¬èº«ï¼Œå› æ­¤åº”å§‹ç»ˆè¿”å›VK_FALSEã€‚ 2.4.2 æ³¨å†Œè°ƒè¯•å›è°ƒåœ¨Vulkanä¸­, è°ƒè¯•å›è°ƒä¹Ÿæ˜¯é€šè¿‡éœ€è¦æ˜¾å¼åˆ›å»ºå’Œé”€æ¯çš„å¥æŸ„æ¥ç®¡ç†çš„ã€‚ è¿™æ ·çš„å›è°ƒæ˜¯debug messageçš„ä¸€éƒ¨åˆ†ï¼Œå¯ä»¥æ ¹æ®éœ€è¦è®¾ç½®å°½å¯èƒ½å¤šçš„å›è°ƒã€‚ 12345678910111213141516171819202122232425// åœ¨æˆå‘˜å˜é‡ä¸­æ·»åŠ ï¼šVkDebugUtilsMessengerEXTVkDebugUtilsMessengerEXT debugMessenger;void initVulkan() &#123; createInstance(); setupDebugMessenger();&#125;void setupDebugMessenger() &#123; if (!enableValidationLayers) return; VkDebugUtilsMessengerCreateInfoEXT createInfo = &#123;&#125;; createInfo.sType = VK_STRUCTURE_TYPE_DEBUG_UTILS_MESSENGER_CREATE_INFO_EXT; createInfo.messageSeverity = VK_DEBUG_UTILS_MESSAGE_SEVERITY_VERBOSE_BIT_EXT | VK_DEBUG_UTILS_MESSAGE_SEVERITY_WARNING_BIT_EXT | VK_DEBUG_UTILS_MESSAGE_SEVERITY_ERROR_BIT_EXT; createInfo.messageType = VK_DEBUG_UTILS_MESSAGE_TYPE_GENERAL_BIT_EXT | VK_DEBUG_UTILS_MESSAGE_TYPE_VALIDATION_BIT_EXT | VK_DEBUG_UTILS_MESSAGE_TYPE_PERFORMANCE_BIT_EXT; // æŒ‡å®šæ¶ˆæ¯å›è°ƒå‡½æ•° createInfo.pfnUserCallback = debugCallback; createInfo.pUserData = nullptr; // å¯é€‰&#125; messageSeverityå­—æ®µå…è®¸æŒ‡å®šè¦ä¸ºå…¶è°ƒç”¨å›è°ƒçš„æ‰€æœ‰ç±»å‹çš„ä¸¥é‡æ€§ã€‚åœ¨è¿™é‡ŒæŒ‡å®šäº†é™¤VK_DEBUG_UTILS_MESSAGE_SEVERITY_INFO_BIT_EXTä¹‹å¤–çš„æ‰€æœ‰ç±»å‹ï¼Œä»¥æ¥æ”¶æœ‰å…³å¯èƒ½é—®é¢˜çš„é€šçŸ¥ï¼ŒåŒæ—¶çœç•¥è¯¦ç»†çš„ä¸€èˆ¬è°ƒè¯•ä¿¡æ¯ã€‚ç±»ä¼¼åœ°ï¼ŒmessageTypeå­—æ®µå¯ä»¥è¿‡æ»¤é€šçŸ¥å›è°ƒçš„æ¶ˆæ¯ç±»å‹ã€‚ åœ¨è¿™é‡Œå¯ç”¨äº†æ‰€æœ‰ç±»å‹ã€‚æœ€åï¼ŒpfnUserCallbackå­—æ®µæŒ‡å®šå›è°ƒå‡½æ•°çš„æŒ‡é’ˆã€‚å¯ä»¥é€‰æ‹©å°†æŒ‡é’ˆä¼ é€’ç»™pUserDataå­—æ®µï¼Œè¯¥å­—æ®µå°†é€šè¿‡pUserDataå‚æ•°ä¼ é€’ç»™å›è°ƒå‡½æ•°ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨å®ƒæ¥ä¼ é€’æŒ‡å‘HelloTriangleApplicationç±»çš„æŒ‡é’ˆã€‚ åº”è¯¥å°†ç»“æ„ä½“ VkDebugUtilsMessengerEXT ä¼ é€’ç»™vkCreateDebugUtilsMessengerEXTå‡½æ•°ä»¥åˆ›å»ºVkDebugUtilsMessengerEXTå¯¹è±¡ã€‚ç„¶è€Œå› ä¸ºè¿™ä¸ªfunctionæ˜¯ä¸€ä¸ªæ‰©å±•å‡½æ•°ï¼Œå®ƒä¸ä¼šè‡ªåŠ¨åŠ è½½ã€‚å¿…é¡»ä½¿ç”¨vkGetInstanceProcAddræŸ¥æ‰¾å…¶åœ°å€ã€‚ åˆ›å»ºä»£ç†å‡½æ•°ï¼Œç„¶ååœ¨å¤„ç†å®ƒï¼Œå¦‚ä¸‹: 12345678910111213VkResult CreateDebugUtilsMessengerEXT(VkInstance instance, const VkDebugUtilsMessengerCreateInfoEXT* pCreateInfo, const VkAllocationCallbacks* pAllocator, VkDebugUtilsMessengerEXT* pDebugMessenger) &#123; auto func = (PFN_vkCreateDebugUtilsMessengerEXT) vkGetInstanceProcAddr(instance,&quot;vkCreateDebugUtilsMessengerEXT&quot;); if (func != nullptr) &#123; return func(instance, pCreateInfo, pAllocator, pDebugMessenger); &#125; else &#123; return VK_ERROR_EXTENSION_NOT_PRESENT; &#125;&#125; ç°åœ¨æˆ‘ä»¬å¯ä»¥åœ¨ setupDebugMessenger ä¸­è°ƒç”¨æ­¤å‡½æ•°ï¼š 12345678910void setupDebugMessenger() &#123; if (!enableValidationLayers) return; ...... // å®ä¾‹åŒ–DebugUtilsMessengerEXT if (CreateDebugUtilsMessengerEXT(instance, &amp;createInfo, nullptr, &amp;debugMessenger) != VK_SUCCESS) &#123; throw std::runtime_error(&quot;failed to set up debug messenger!&quot;); &#125;&#125; æœ€åæ³¨æ„ï¼Œæ—¢ç„¶æœ‰ vkCreateXXX, å°±éœ€è¦æ˜¾ç¤ºè°ƒç”¨ vkDestroyXXX å“¦ï¼ 12345678910void DestroyDebugUtilsMessengerEXT(VkInstance instance, VkDebugUtilsMessengerEXT debugMessenger, const VkAllocationCallbacks* pAllocator) &#123; auto func = (PFN_vkDestroyDebugUtilsMessengerEXT) vkGetInstanceProcAddr(instance, &quot;vkDestroyDebugUtilsMessengerEXT&quot;); if (func != nullptr) &#123; func(instance, debugMessenger, pAllocator); &#125;&#125; å¦‚æœä½ å¿˜äº†è°ƒç”¨DestroyDebugUtilsMessengerEXTå»é”€æ¯debugMessengerï¼Œåœ¨å…³é—­çª—å£çš„æ—¶å€™å°±ä¼šæ‰“å°å¦‚ä¸‹ä¿¡æ¯: ä¸‰. ä»£ç 3.1 Makefile12345678910111213141516VULKAN_SDK_PATH = /home/jh/Program/vulkan/1.1.160.0/x86_64CFLAGS = -std=c++17 -I$(VULKAN_SDK_PATH)/includeLDFLAGS = -L$(VULKAN_SDK_PATH)/lib -lvulkan `pkg-config --static --libs glfw3`LDFLAGS += -ldlHelloTriangleApplication: main.cpp g++ $(CFLAGS) -o HelloTriangleApplication main.cpp $(LDFLAGS).PHONY: test cleantest: HelloTriangleApplication LD_LIBRARY_PATH=$(VULKAN_SDK_PATH)/lib VK_LAYER_PATH=$(VULKAN_SDK_PATH)/etc/explicit_layer.d ./HelloTriangleApplicationclean:rm -f HelloTriangleApplication 3.2 main.cpp123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294/** * #include &lt;vulkan/vulkan.h&gt; // vulkan å¤´æ–‡ä»¶ * ä½¿ç”¨ä¸‹é¢ä¸¤è¡Œæ›¿æ¢ vulkanå¤´æ–‡ä»¶ * #define GLFW_INCLUDE_VULKAN * #include &lt;GLFW/glfw3.h&gt; * * GLFW ä¼šè‡ªåŠ¨åŠ è½½ vulkan å¤´æ–‡ä»¶çš„ã€‚ * GLFWæ˜¯ä¸€ä¸ªå¼€æºï¼Œå¤šå¹³å°çš„åº“ï¼Œç”¨äºæ¡Œé¢ä¸Šçš„OpenGLï¼ŒOpenGL ESå’ŒVulkanå¼€å‘ã€‚ * å®ƒæä¾›äº†ä¸€ä¸ªç®€å•çš„APIï¼Œç”¨äºåˆ›å»ºçª—å£ï¼Œä¸Šä¸‹æ–‡å’Œæ›²é¢ï¼Œæ¥æ”¶è¾“å…¥å’Œäº‹ä»¶ã€‚ * GLFWæ˜¯ç”¨Cè¯­è¨€ç¼–å†™çš„ï¼Œå¹¶ä¸”ä½¿ç”¨X Windowç³»ç»Ÿï¼ˆä¾‹å¦‚Linuxå’ŒFreeBSDï¼‰å¯¹Windowsï¼ŒmacOSå’Œè®¸å¤šç±»Unixç³»ç»Ÿæä¾›åŸç”Ÿæ”¯æŒã€‚ */#define GLFW_INCLUDE_VULKAN#include &lt;GLFW/glfw3.h&gt;#include &lt;iostream&gt;#include &lt;stdexcept&gt; // åŒ…å«ç”¨äºæŠ¥å‘Šé”™è¯¯çš„å¤´æ–‡ä»¶#include &lt;functional&gt; // ç”¨äºèµ„æºç®¡ç†éƒ¨åˆ†ä¸­çš„lambdaå‡½æ•°#include &lt;cstdlib&gt; // cstdlib: EXIT_FAILURE, EXIT_SUCCESS#include &lt;vector&gt;#include &lt;string.h&gt; #ifdef NDEBUG const bool enableValidationLayers = false;#else const bool enableValidationLayers = true;#endifclass HelloTriangleApplication &#123;public: void run() &#123; initWindow(); initVulkan(); mainLoop(); cleanup(); &#125; const int WIDTH = 800; const int HEIGHT = 600; const char * WINDOW_TITLE = &quot;Vulkan&quot;;private: void initWindow() &#123; // ç¬¬ä¸€æ­¥ä¸€å®šæ˜¯å…ˆåˆå§‹åŒ–GLFWåº“. glfwInit(); // å› ä¸ºGLFWæœ€åˆæ˜¯ä¸ºåˆ›å»ºOpenGLä¸Šä¸‹æ–‡è€Œè®¾è®¡çš„ï¼Œ // æ‰€ä»¥æˆ‘ä»¬éœ€è¦å‘Šè¯‰å®ƒä¸è¦é€šè¿‡åç»­è°ƒç”¨åˆ›å»ºOpenGLä¸Šä¸‹æ–‡ï¼šGLFW_NO_API glfwWindowHint(GLFW_CLIENT_API, GLFW_NO_API); // å› ä¸ºå¤„ç†å¤§å°å¯å˜çš„çª—å£æ¯”è¾ƒå¤æ‚ï¼Œæš‚æ—¶å…ˆè®©çª—å£ä¸å¯å˜ glfwWindowHint(GLFW_RESIZABLE, GLFW_FALSE); // åˆ›å»ºçª—å£ // GLFWwindow *glfwCreateWindow(int width, int height, const char *title, GLFWmonitor *monitor, GLFWwindow *share) window = glfwCreateWindow(WIDTH, HEIGHT, WINDOW_TITLE, nullptr, nullptr); &#125; void initVulkan() &#123; checkAvailableExtensions(); createInstance(); // åˆ›å»ºDEBUGæ¶ˆæ¯å›è°ƒ setupDebugMessenger(); &#125; void setupDebugMessenger() &#123; if (!enableValidationLayers) return; VkDebugUtilsMessengerCreateInfoEXT createInfo = &#123;&#125;; createInfo.sType = VK_STRUCTURE_TYPE_DEBUG_UTILS_MESSENGER_CREATE_INFO_EXT; createInfo.messageSeverity = VK_DEBUG_UTILS_MESSAGE_SEVERITY_VERBOSE_BIT_EXT | VK_DEBUG_UTILS_MESSAGE_SEVERITY_WARNING_BIT_EXT | VK_DEBUG_UTILS_MESSAGE_SEVERITY_ERROR_BIT_EXT; createInfo.messageType = VK_DEBUG_UTILS_MESSAGE_TYPE_GENERAL_BIT_EXT | VK_DEBUG_UTILS_MESSAGE_TYPE_VALIDATION_BIT_EXT | VK_DEBUG_UTILS_MESSAGE_TYPE_PERFORMANCE_BIT_EXT; // æŒ‡å®šæ¶ˆæ¯å›è°ƒå‡½æ•° createInfo.pfnUserCallback = debugCallback; createInfo.pUserData = nullptr; // å¯é€‰ // å®ä¾‹åŒ–DebugUtilsMessengerEXT if (CreateDebugUtilsMessengerEXT(instance, &amp;createInfo, nullptr, &amp;debugMessenger) != VK_SUCCESS) &#123; throw std::runtime_error(&quot;failed to set up debug messenger!&quot;); &#125; &#125; void checkAvailableExtensions() &#123; uint32_t extensionCount = 0; vkEnumerateInstanceExtensionProperties(nullptr, &amp;extensionCount, nullptr); std::vector&lt;VkExtensionProperties&gt; extensions(extensionCount); vkEnumerateInstanceExtensionProperties(nullptr, &amp;extensionCount, extensions.data()); std::cout &lt;&lt; &quot;available extensions:&quot; &lt;&lt; std::endl; for (const auto&amp; extension : extensions) &#123; std::cout &lt;&lt; &quot;\\t&quot; &lt;&lt; extension.extensionName &lt;&lt; std::endl; &#125; &#125; bool checkValidationLayerSupport() &#123; uint32_t layerCount; vkEnumerateInstanceLayerProperties(&amp;layerCount, nullptr); std::vector&lt;VkLayerProperties&gt; availableLayers(layerCount); vkEnumerateInstanceLayerProperties(&amp;layerCount, availableLayers.data()); for (const char* layerName : validationLayers) &#123; //bool layerFound = false; for (const auto&amp; layerProperties : availableLayers) &#123; if (strcmp(layerName, layerProperties.layerName) == 0) &#123; //layerFound = true; return true; &#125; &#125; &#125; return false; &#125; void createInstance() &#123; // éªŒè¯å±‚ï¼Œæ£€éªŒVK_LAYER_KHRONOS_validation if (enableValidationLayers &amp;&amp; !checkValidationLayerSupport()) &#123; throw std::runtime_error(&quot;validation layers requested, but not available!&quot;); &#125; // åˆ›å»ºä¸€ä¸ªå®ä¾‹é¦–å…ˆå¿…é¡»å¡«å†™ä¸€ä¸ªåŒ…å«æœ‰å…³æˆ‘ä»¬åº”ç”¨ç¨‹åºçš„ä¿¡æ¯çš„ç»“æ„: VkApplicationInfo // è¿™äº›æ•°æ®åœ¨æŠ€æœ¯ä¸Šæ˜¯å¯é€‰çš„ï¼Œä½†å®ƒå¯ä»¥ä¸ºé©±åŠ¨ç¨‹åºæä¾›ä¸€äº›æœ‰ç”¨çš„ä¿¡æ¯ï¼Œä»¥ä¾¿é’ˆå¯¹æˆ‘ä»¬çš„ç‰¹å®šåº”ç”¨è¿›è¡Œä¼˜åŒ– VkApplicationInfo appInfo = &#123;&#125;; // Vulkanä¸­çš„è®¸å¤šç»“æ„è¦æ±‚åœ¨sTypeæˆå‘˜ä¸­æ˜ç¡®æŒ‡å®šç±»å‹ã€‚ // è¿™ä¹Ÿæ˜¯å…·æœ‰pNextæˆå‘˜çš„è®¸å¤šç»“æ„ä¸­çš„ä¸€ä¸ªï¼Œè¯¥æˆå‘˜å¯ä»¥åœ¨å°†æ¥æŒ‡å‘æ‰©å±•ä¿¡æ¯ã€‚ appInfo.sType = VK_STRUCTURE_TYPE_APPLICATION_INFO; appInfo.pApplicationName = &quot;Hello Triangle&quot;; appInfo.applicationVersion = VK_MAKE_VERSION(1, 1, 0); appInfo.pEngineName = &quot;No Engine&quot;; appInfo.engineVersion = VK_MAKE_VERSION(1, 1, 0); appInfo.apiVersion = VK_API_VERSION_1_1; // Vulkanä¸­çš„å¾ˆå¤šä¿¡æ¯éƒ½æ˜¯é€šè¿‡ç»“æ„è€Œä¸æ˜¯å‡½æ•°å‚æ•°ä¼ é€’çš„ï¼Œ // æˆ‘ä»¬å¿…é¡»å†å¡«å……ä¸€ä¸ªç»“æ„ä½“ VkInstanceCreateInfo æ¥ä¸ºåˆ›å»ºå®ä¾‹æä¾›è¶³å¤Ÿçš„ä¿¡æ¯ã€‚ // VkInstanceCreateInfoç»“æ„æ˜¯å¿…é¡»æŒ‡æ˜çš„ï¼Œå®ƒå‘Šè¯‰Vulkané©±åŠ¨ç¨‹åºæˆ‘ä»¬æƒ³è¦ä½¿ç”¨å“ªäº›å…¨å±€æ‰©å±•å’ŒéªŒè¯å±‚ã€‚ VkInstanceCreateInfo createInfo = &#123;&#125;; createInfo.sType = VK_STRUCTURE_TYPE_INSTANCE_CREATE_INFO; createInfo.pNext = nullptr; createInfo.pApplicationInfo = &amp;appInfo; /* // å‰ä¸¤ä¸ªå‚æ•°å¾ˆç®€å•ã€‚ // Vulkanæ˜¯ä¸€ä¸ªä¸å¹³å°æ— å…³çš„APIï¼Œè¿™æ„å‘³ç€éœ€è¦ä¸€ä¸ªä¸çª—å£ç³»ç»Ÿæ¥å£çš„æ‰©å±•ã€‚ // GLFWæœ‰ä¸€ä¸ªæ–¹ä¾¿çš„å†…ç½®å‡½æ•°ï¼Œå®ƒè¿”å›å®ƒéœ€è¦åšçš„æ‰©å±•ï¼Œæˆ‘ä»¬å¯ä»¥ä¼ é€’ç»™ç»“æ„ä½“ï¼šVkInstanceCreateInfo uint32_t glfwExtensionCount = 0; const char** glfwExtensions; // è¿”å›GLFWæ‰€éœ€çš„Vulkanå®ä¾‹æ‰©å±•ã€‚ // æ­¤å‡½æ•°è¿”å›GLFWæ‰€éœ€çš„Vulkanå®ä¾‹æ‰©å±•åçš„æ•°ç»„ï¼Œä»¥ä¾¿ä¸ºGLFWçª—å£åˆ›å»ºVulkan surfaceã€‚ // å¦‚æœæˆåŠŸï¼Œåˆ—è¡¨å°†å§‹ç»ˆåŒ…å«`VK_KHR_surface`ï¼Œå› æ­¤å¦‚æœæ‚¨ä¸éœ€è¦ä»»ä½•å…¶ä»–æ‰©å±•ï¼Œåˆ™å¯ä»¥å°†æ­¤åˆ—è¡¨ç›´æ¥ä¼ é€’ç»™`VkInstanceCreateInfo`ç»“æ„ã€‚ // å¦‚æœæœºå™¨ä¸Šæ²¡æœ‰Vulkanï¼Œåˆ™æ­¤å‡½æ•°è¿”å›â€œNULLâ€å¹¶ç”Ÿæˆ GLFW_API_UNAVAILABLEé”™è¯¯ã€‚ glfwExtensions = glfwGetRequiredInstanceExtensions(&amp;glfwExtensionCount); // ç¬”è€…æ›¾åœ¨è¿™é‡Œæ ½äº†ä¸ªè·Ÿå¤´ï¼Œå†™é”™äº†ã€‚å¦‚ä¸Šå†™ï¼Œç¼–è¯‘ä¸å‡ºé—®é¢˜ï¼Œä½†è¿è¡Œæ—¶ä¼šæŠ¥ Segmentation fault (core dumped) // æ‰“å°å †æ ˆï¼Œçœ‹äº†åŠå¤©ï¼Œæ‰å‘ç°çš„ï¼Œå¼•ä»¥ä¸ºæˆ’ï¼Œä¸è¿‡è¿™ä¸¤å˜é‡åå­—å¾ˆåƒã€‚ createInfo.ppEnabledLayerNames = glfwExtensions; createInfo.ppEnabledExtensionNames = glfwExtensions; createInfo.enabledExtensionCount = glfwExtensionCount; */ // è¿”å›GLFWæ‰€éœ€çš„Vulkanå®ä¾‹æ‰©å±•, æ”¯æŒæ¶ˆæ¯å›è°ƒ auto extensions = getRequiredExtensions(); createInfo.enabledExtensionCount = static_cast&lt;uint32_t&gt;(extensions.size()); createInfo.ppEnabledExtensionNames = extensions.data(); // ç»“æ„ä½“çš„æœ€åä¸¤ä¸ªæˆå‘˜ç¡®å®šè¦å¯ç”¨çš„å…¨å±€éªŒè¯å±‚ã€‚ if (enableValidationLayers) &#123; createInfo.enabledLayerCount = static_cast&lt;uint32_t&gt;(validationLayers.size()); createInfo.ppEnabledLayerNames = validationLayers.data(); &#125; else &#123; createInfo.enabledLayerCount = 0; &#125; // VkResult vkCreateInstance(const VkInstanceCreateInfo *pCreateInfo, const VkAllocationCallbacks *pAllocator, VkInstance *pInstance) VkResult res = vkCreateInstance(&amp;createInfo, nullptr, &amp;instance); if (res != VK_SUCCESS) &#123; throw std::runtime_error(&quot;failed to create instance!&quot;); &#125; &#125; void mainLoop() &#123; // æ·»åŠ ä¸€ä¸ªäº‹ä»¶å¾ªç¯, ä½¿åº”ç”¨ç¨‹åºä¿æŒè¿è¡Œç›´åˆ°å‘ç”Ÿé”™è¯¯æˆ–çª—å£å…³é—­ while (!glfwWindowShouldClose(window)) &#123; glfwPollEvents(); &#125; &#125; // åœ¨ vulkan ä¸­æ¨èåœ¨åˆ›å»ºçš„èµ„æºä¸éœ€è¦åä¸»åŠ¨é‡Šæ”¾ void cleanup() &#123; // é‡Šæ”¾debugMessenger(VkDebugUtilsMessengerEXT, ç”¨äºæ‰“å°è°ƒè¯•ä¿¡æ¯) if (enableValidationLayers) &#123; DestroyDebugUtilsMessengerEXT(instance, debugMessenger, nullptr); &#125; // åœ¨ vulkan ä¸­èµ„æºä¸€èˆ¬éƒ½æ˜¯ vkCreateXXX åˆ›å»ºï¼Œç”± vkDestroyXXX æˆ– vkFreeXXX é‡Šæ”¾. vkDestroyInstance(instance, nullptr); // æ­¤å‡½æ•°ä¼šç ´åæŒ‡å®šçš„çª—å£åŠå…¶ä¸Šä¸‹æ–‡ã€‚ åœ¨è°ƒç”¨æ­¤å‡½æ•°æ—¶ï¼Œä¸ä¼šä¸ºè¯¥çª—å£è°ƒç”¨å…¶ä»–å›è°ƒã€‚ // å¦‚æœæŒ‡å®šçª—å£çš„ä¸Šä¸‹æ–‡åœ¨ä¸»çº¿ç¨‹ä¸Šæ˜¯æœ€æ–°çš„ï¼Œåˆ™åœ¨é”€æ¯ä¹‹å‰å°†å…¶åˆ†ç¦»ã€‚ glfwDestroyWindow(window); // æ­¤åŠŸèƒ½ä¼šé‡Šæ”¾æ‰€æœ‰å‰©ä½™çš„çª—å£å’Œå…‰æ ‡å¹¶é‡Šæ”¾ä»»ä½•å…¶ä»–å·²åˆ†é…çš„èµ„æºã€‚ // è°ƒç”¨æ­¤å‡½æ•°åï¼Œå¿…é¡»å†æ¬¡æˆåŠŸè°ƒç”¨@ref glfwInitï¼Œç„¶åæ‰èƒ½ä½¿ç”¨å¤§å¤šæ•°GLFWå‡½æ•°ã€‚ glfwTerminate(); &#125; // ç”¨äºæ¶ˆæ¯å›è°ƒMessage Callback std::vector&lt;const char*&gt; getRequiredExtensions() &#123; uint32_t glfwExtensionCount = 0; const char** glfwExtensions; glfwExtensions = glfwGetRequiredInstanceExtensions(&amp;glfwExtensionCount); std::vector&lt;const char*&gt; extensions(glfwExtensions, glfwExtensions + glfwExtensionCount); if (enableValidationLayers) &#123; extensions.push_back(VK_EXT_DEBUG_UTILS_EXTENSION_NAME); &#125; return extensions; &#125; // æ‰“å°debugä¿¡æ¯ static VKAPI_ATTR VkBool32 VKAPI_CALL debugCallback( VkDebugUtilsMessageSeverityFlagBitsEXT messageSeverity, VkDebugUtilsMessageTypeFlagsEXT messageType, const VkDebugUtilsMessengerCallbackDataEXT* pCallbackData, void* pUserData) &#123; std::cerr &lt;&lt; &quot;validation layer: &quot; &lt;&lt; pCallbackData-&gt;pMessage&lt;&lt; std::endl; return VK_FALSE; &#125; // åˆ›å»º VkDebugUtilsMessengerEXT å¯¹è±¡debugMessenger VkResult CreateDebugUtilsMessengerEXT(VkInstance instance, const VkDebugUtilsMessengerCreateInfoEXT* pCreateInfo, const VkAllocationCallbacks* pAllocator, VkDebugUtilsMessengerEXT* pDebugMessenger) &#123; // å°†ç»“æ„ä½“ VkDebugUtilsMessengerEXT ä¼ é€’ç»™vkCreateDebugUtilsMessengerEXTå‡½æ•°ä»¥åˆ›å»ºVkDebugUtilsMessengerEXTå¯¹è±¡ã€‚ // ç„¶è€Œå› ä¸ºè¿™ä¸ªfunctionæ˜¯ä¸€ä¸ªæ‰©å±•å‡½æ•°ï¼Œå®ƒä¸ä¼šè‡ªåŠ¨åŠ è½½ã€‚ // å¿…é¡»ä½¿ç”¨vkGetInstanceProcAddræŸ¥æ‰¾å…¶åœ°å€ã€‚ auto func = (PFN_vkCreateDebugUtilsMessengerEXT) vkGetInstanceProcAddr(instance,&quot;vkCreateDebugUtilsMessengerEXT&quot;); if (func != nullptr) &#123; return func(instance, pCreateInfo, pAllocator, pDebugMessenger); &#125; else &#123; return VK_ERROR_EXTENSION_NOT_PRESENT; &#125; &#125; // é”€æ¯VkDebugUtilsMessengerEXT void DestroyDebugUtilsMessengerEXT(VkInstance instance, VkDebugUtilsMessengerEXT debugMessenger, const VkAllocationCallbacks* pAllocator) &#123; auto func = (PFN_vkDestroyDebugUtilsMessengerEXT) vkGetInstanceProcAddr(instance, &quot;vkDestroyDebugUtilsMessengerEXT&quot;); if (func != nullptr) &#123; func(instance, debugMessenger, pAllocator); &#125; &#125; // Windowå®ä¾‹ GLFWwindow* window; // Vulkanå®ä¾‹ VkInstance instance; // DEBUGæ¶ˆæ¯å›è°ƒ VkDebugUtilsMessengerEXT debugMessenger; // éªŒè¯å±‚ const std::vector&lt;const char*&gt; validationLayers = &#123; &quot;VK_LAYER_KHRONOS_validation&quot; &#125;;&#125;;int main() &#123; HelloTriangleApplication app; try &#123; app.run(); &#125; catch (const std::exception&amp; e) &#123; std::cerr &lt;&lt; e.what() &lt;&lt; std::endl; return EXIT_FAILURE; &#125; return EXIT_SUCCESS;&#125;","categories":[],"tags":[]},{"title":"Vulkanå…¥é—¨(1)-ç¯å¢ƒé…ç½®","slug":"Vulkanå…¥é—¨-1-ç¯å¢ƒé…ç½®","date":"2022-02-26T13:13:24.000Z","updated":"2022-02-26T15:16:47.687Z","comments":true,"path":"2022/02/26/Vulkanå…¥é—¨-1-ç¯å¢ƒé…ç½®/","link":"","permalink":"https://swallowjoe.github.io/2022/02/26/Vulkan%E5%85%A5%E9%97%A8-1-%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/","excerpt":"","text":"å‚è€ƒèµ„æ–™ ç®€è¿° ä¸€. å‡†å¤‡ç¯å¢ƒ 1.1 å¼€å‘ç¯å¢ƒ 1.2 ä¸‹è½½ SDK 1.3 å®‰è£…SDK 1.4 å®‰è£…é©±åŠ¨ 1.5. è¿è¡Œç¤ºä¾‹ç¨‹åº äºŒ. GLFW å®‰è£… ä¸‰. GLM å®‰è£… å››. æ‰‹åŠ¨ç¼–è¯‘ç¤ºä¾‹ä»£ç  4.1 åœ¨ç¼–è¯‘ç¤ºä¾‹ä»£ç çš„æ—¶å€™è€æ˜¯æŠ¥é”™ï¼Œæ‰¾ä¸åˆ°vulkanå¤´æ–‡ä»¶ã€‚ 4.2 error adding symbols: DSO missing from command line 4.3 è¿è¡Œç¤ºä¾‹ äº”. ä¸»è¦ä»£ç  5.1 main.cpp 5.2 Makefile å‚è€ƒèµ„æ–™ https://vulkan.lunarg.com/doc/sdk/1.2.170.0/linux/getting_started.html https://github.com/google/glog [pkg-configçš„ç”¨æ³•]https://www.cnblogs.com/chris-cp/p/3580002.html [è§£å†³&#x2F;usr&#x2F;local&#x2F;lib&#x2F;libglog.so.0: error adding symbols: DSO missing from command line]https://blog.csdn.net/u010987458/article/details/72235408 https://www.glfw.org/docs/3.3/build_guide.html#build_link_cmake_package [GLFW]https://www.glfw.org/ [GLM]https://github.com/g-truc/glm ç®€è¿°æœ¬æ–‡ä¸»è¦æ˜¯ä»‹ç»å¦‚ä½•åœ¨ ubuntu æœºå™¨ä¸Šå®‰è£…å¹¶ç¼–è¯‘Vulkanç¨‹åºã€‚ ä¸€. å‡†å¤‡ç¯å¢ƒ1.1 å¼€å‘ç¯å¢ƒ12345sudo apt-get updatesudo apt-get dist-upgradesudo apt-get install libglm-dev cmake libxcb-dri3-0 libxcb-present0 libpciaccess0 libpng-dev libxcb-keysyms1-dev libxcb-dri3-dev libx11-dev libmirclient-dev libwayland-dev libxrandr-dev libxcb-ewmh-devsudo apt-get install git libpython2.7 1.2 ä¸‹è½½ SDKå®˜æ–¹ç½‘ç«™ï¼šhttps://vulkan.lunarg.com/ ä¸‹è½½SDKåŒ…ï¼švulkan-sdk.tar.gz 1234cd ~/Programmkdir vulkancd vulkantar zxf $HOME/Downloads/vulkan-sdk.tar.gz è§£å‹åçš„æ–‡ä»¶ç›®å½•å¦‚ä¸‹ï¼š æ–‡ä»¶å¤¹ æè¿° x86_64&#x2F;bin Vulkanå·¥å…·å’Œå‘½ä»¤ x86_64&#x2F;include&#x2F;vulkan ç¼–è¯‘é“¾æ¥å¤´æ–‡ä»¶ x86_64&#x2F;lib VulkanåŠ è½½ç¨‹åºåº“å’Œlayerè¿è¡Œæ—¶åº“ x86_64&#x2F;etc&#x2F;explicit_layer.d .json ç”¨äºVulkanéªŒè¯å±‚çš„æ¸…å•æ–‡ä»¶ config æ ·æœ¬å±‚è®¾ç½®æ–‡ä»¶ï¼Œç³»ç»Ÿé…ç½®è¯´æ˜ doc Khronos SPIRVï¼ŒVulkanï¼ŒLoaderå’ŒWSIè§„èŒƒ examples Vulkanç¨‹åºç¤ºä¾‹ samples Vulkançš„ç¤ºä¾‹ä»£ç  source glslangå’Œæ‰€é€‰Vulkanç»„ä»¶çš„æºå’Œè°ƒè¯•åº“ 1.3 å®‰è£…SDK123456source ~/Program/vulkan/1.2.170.0/setup-env.shexport VULKAN_SDK=~/vulkan/1.2.170.0/x86_64export PATH=$VULKAN_SDK/bin:$PATHexport LD_LIBRARY_PATH=$VULKAN_SDK/lib:$LD_LIBRARY_PATHexport VK_LAYER_PATH=$VULKAN_SDK/etc/explicit_layer.d å¤§åŠŸå‘Šæˆï¼Œæ£€æŸ¥ä¸€ä¸‹ï¼šè¾“å…¥vulkaninfo&#x75;&#98;&#117;&#110;&#116;&#x75;&#x40;&#x31;&#x38;&#46;&#48;&#52;&#x4c; ~ vulkaninfoCannot create Vulkan instance.&#x2F;home&#x2F;lunarg&#x2F;sdk-build&#x2F;Vulkan-Tools&#x2F;vulkaninfo&#x2F;vulkaninfo.c:921: failed with VK_ERROR_INCOMPATIBLE_DRIVER wtf, å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿç­‰ç­‰ï¼Œè²Œä¼¼æˆ‘ä»¬æ²¡æœ‰æ£€æŸ¥æ˜¯å¦å®‰è£…äº†é©±åŠ¨ã€‚ã€‚ã€‚ 1.4 å®‰è£…é©±åŠ¨123456789sudo add-apt-repository ppa:oibaf/graphics-driverssudo apt updatesudo apt upgradeapt install libvulkan1 mesa-vulkan-drivers vulkan-utils// æˆ–è€…è¯•è¯•ï¼šsudo add-apt-repository ppa:graphics-drivers/ppasudo apt upgradesudo apt install nvidia-graphics-drivers-396 nvidia-settings vulkan vulkan-utils æ£€æŸ¥ä¸€ä¸‹ï¼šè¾“å…¥vulkaninfo æˆ–è€…ï¼švulkaninfo â€“html , åœ¨å½“å‰ç›®å½•ç”Ÿæˆ vulkaninfo.html æ–‡ä»¶ï¼Œç”¨æµè§ˆå™¨æ‰“å¼€ï¼Œå¯ä»¥çœ‹åˆ°æ›´å¤šä¿¡æ¯ 1.5. è¿è¡Œç¤ºä¾‹ç¨‹åº12345cd Program/vulkan/1.1.160.0/examplesmkdir buildcd buildcmake ..make makeæˆåŠŸåä¼šåœ¨å½“å‰ç›®å½•ç”Ÿæˆï¼š è¿è¡Œç¤ºä¾‹ç¨‹åºï¼š 1./vkcube ä¸€ä¸ªæ—‹è½¬çš„ç«‹æ–¹ä½“ï½ äºŒ. GLFW å®‰è£…Vulkanæœ¬èº«æ˜¯ä¸€ä¸ªä¸å¹³å°æ— å…³çš„APIï¼Œä¸åŒ…æ‹¬ç”¨äºåˆ›å»ºæ˜¾ç¤ºæ¸²æŸ“ç»“æœçš„çª—å£çš„å·¥å…·ã€‚ ä¸ºäº†ä»Vulkançš„è·¨å¹³å°ä¼˜åŠ¿ä¸­å—ç›Šå¹¶é¿å…X11çš„é™åˆ¶ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨GLFWåº“æ¥åˆ›å»ºä¸€ä¸ªæ”¯æŒWindowsï¼ŒLinuxå’ŒMacOSçš„çª—å£ã€‚è¿˜æœ‰å…¶ä»–å¯ç”¨äºæ­¤ç›®çš„çš„åº“ï¼Œå¦‚SDLï¼Œä½†GLFWçš„ä¼˜åŠ¿åœ¨äºå®ƒé™¤äº†çª—å£åˆ›å»ºä¹‹å¤–ï¼Œè¿˜æŠ½è±¡äº†Vulkanä¸­ä¸€äº›å…¶ä»–ç‰¹å®šäºå¹³å°çš„ä¸œè¥¿ã€‚æˆ‘ä»¬å°†ä»æºä»£ç å®‰è£…GLFWè€Œä¸æ˜¯ä½¿ç”¨è½¯ä»¶åŒ…ï¼Œå› ä¸ºVulkanæ”¯æŒéœ€è¦æœ€æ–°ç‰ˆæœ¬ã€‚ å¯ä»¥åœ¨å®˜æ–¹ç½‘ç«™ä¸Šæ‰¾åˆ°è¿™äº›æ¥æºã€‚å°†æºä»£ç è§£å‹ç¼©åˆ°ä¸€ä¸ªæ–¹ä¾¿çš„ç›®å½•ï¼Œå¹¶ä½¿ç”¨CMakeLists.txtç­‰æ–‡ä»¶æ‰“å¼€ç›®å½•ä¸­çš„ç»ˆç«¯ã€‚ githubåœ°å€ï¼šhttps://github.com/glfw/glfwè§£å‹åè¿›å…¥å…¶ä¸»ç›®å½•ï¼šcmake .æœ‰æŠ¥é”™ï¼š 12345678-- Looking for shmat - found-- Found X11: /usr/lib/x86_64-linux-gnu/libX11.soCMake Error at CMakeLists.txt:220 (message): The Xinerama headers were not found-- Configuring incomplete, errors occurred!See also &quot;/home/jh/Program/vulkan/glfw-master/CMakeFiles/CMakeOutput.log&quot;.See also &quot;/home/jh/Program/vulkan/glfw-master/CMakeFiles/CMakeError.log&quot;. ç¼ºå°‘ç¯å¢ƒï¼š 1$ ~/Program/vulkan/glfw-master î‚° sudo apt-get install libsdl2-dev ç„¶åé‡æ–°: cmake . 123456ğŸ¦„ î‚° ~/Program/vulkan/glfw-master î‚° cmake .-- Could NOT find Doxygen (missing: DOXYGEN_EXECUTABLE) -- Using X11 for window creation-- Configuring done-- Generating done-- Build files have been written to: /home/jh/Program/vulkan/glfw-master æ¿¡æŸ“æ²¡æœ‰æŠ¥é”™ï¼Œä½†è¿™ä¸ªä¹Ÿæ˜¯æ²¡æœ‰æˆåŠŸçš„ï¼šç¼ºå°‘Doxygensudo apt-get install doxygen é‡æ–°: cmake .æœ€å: makeæˆåŠŸåï¼šsudo make install ä¸‰. GLM å®‰è£…ä¸DirectX 12ä¸åŒï¼ŒVulkanä¸åŒ…å«ç”¨äºçº¿æ€§ä»£æ•°è¿ç®—çš„åº“ï¼Œå› æ­¤æˆ‘ä»¬å¿…é¡»ä¸‹è½½ä¸€ä¸ªã€‚GLMæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„åº“ï¼Œè®¾è®¡ç”¨äºå›¾å½¢APIï¼Œä¹Ÿå¸¸ç”¨äºOpenGLã€‚å®ƒæ˜¯ä¸€ä¸ªåªæœ‰å¤´çš„åº“ï¼Œå¯ä»¥ä»libglm-devåŒ…å®‰è£…ï¼š sudo apt install libglm-dev å››. æ‰‹åŠ¨ç¼–è¯‘ç¤ºä¾‹ä»£ç 4.1 åœ¨ç¼–è¯‘ç¤ºä¾‹ä»£ç çš„æ—¶å€™è€æ˜¯æŠ¥é”™ï¼Œæ‰¾ä¸åˆ°vulkanå¤´æ–‡ä»¶ã€‚123456$ gcc -o main main.cpp -lglfw3In file included from main.cpp:2:/usr/local/include/GLFW/glfw3.h:215:12: fatal error: vulkan/vulkan.h: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½• #include &lt;vulkan/vulkan.h&gt; ^~~~~~~~~~~~~~~~~compilation terminated. å½“ç„¶æ˜¯ç¯å¢ƒè®¾ç½®çš„é—®é¢˜ï¼šéœ€è¦å°†å¤´æ–‡ä»¶ç­‰æ‹·è´åˆ°å¯¹åº”systemæ–‡ä»¶å¤¹ 12345678cd Program/vulkan/1.2.170.0/x86_64sudo cp -r include/vulkan/ /usr/local/include/sudo cp -P lib/libvulkan.so* /usr/local/lib/sudo cp lib/libVkLayer_*.so /usr/local/lib/sudo mkdir -p /usr/local/share/vulkan/explicit_layer.dsudo cp etc/explicit_layer.d/VkLayer_*.json /usr/local/share/vulkan/explicit_layer.d sudo ldconfig 4.2 error adding symbols: DSO missing from command line123456makeg++ -std=c++17 -I/home/jh/Program/vulkan/1.1.160.0/x86_64/include -o VulkanTest main.cpp -L/home/jh/Program/vulkan/1.1.160.0/x86_64/lib -lvulkan -lglfw3/usr/bin/ld: //usr/local/lib/libglfw3.a(vulkan.c.o): undefined reference to symbol &#x27;dlclose@@GLIBC_2.2.5&#x27;/usr/bin/ld: //lib/x86_64-linux-gnu/libdl.so.2: error adding symbols: DSO missing from command linecollect2: error: ld returned 1 exit statusmake: *** [Makefile:8ï¼šVulkanTest] é”™è¯¯ 1 cd &#x2F;usr&#x2F;lib&#x2F;ll |grep -iE â€œliblogâ€æ²¡æœ‰æ–‡ä»¶ https://github.com/google/glogä¸‹è½½è§£å‹, è¿›å…¥è§£å‹åçš„ä¸»ç›®å½•ï¼Œæ‰§è¡Œï¼š.&#x2F;autogen.sh &amp;&amp; .&#x2F;configure &amp;&amp; make &amp;&amp; make install å¦‚æœæŠ¥é”™ï¼šautogen.sh: 5: autogen.sh: autoreconf: not foundsudo apt-get install autoconfsudo apt-get install automakesudo apt-get install libtool é‡æ–°æ‰§è¡Œï¼š.&#x2F;autogen.sh &amp;&amp; .&#x2F;configure &amp;&amp; make &amp;&amp; make installå¯èƒ½è¿˜æœ‰æƒé™é—®é¢˜ï¼š 123456-- Up-to-date: /usr/local/include/GLFWCMake Error at cmake_install.cmake:41 (file): file INSTALL cannot set permissions on &quot;/usr/local/include/GLFW&quot;make: *** [Makefile:118ï¼šinstall] é”™è¯¯ 1 æ‰§è¡Œï¼šcd ..chmod a+x glog-master -Rcd glog-mastermake &amp;&amp; make install okay,ç°åœ¨å¯ä»¥åœ¨Makefileæ–‡ä»¶ä¸­æ·»åŠ ï¼š-lglog é‡æ–° make è¿˜æ˜¯ä¼šå­˜åœ¨è¿™ä¸ªé—®é¢˜ï¼Œç¬”è€…æŸ¥é˜…å„ç§èµ„æ–™ï¼Œå¤§éƒ¨åˆ†æŒ‡æ˜åœ¨Makefileä¸­åŠ å…¥ -ldl å³å¯ï¼Œå°è¯•åå¤±è´¥ã€‚æœ€åå‘ç°æ˜¯ Makefile æ–‡ä»¶å†™çš„æœ‰é—®é¢˜ï¼Œæ”¹æˆå¦‚[#5.2]å³å¯. 4.3 è¿è¡Œç¤ºä¾‹make æˆåŠŸåï¼Œä¼šåœ¨å½“å‰ç›®å½•ç”Ÿæˆ VulkanTest å¯æ‰§è¡Œæ–‡ä»¶: 1./VulkanTest ç»“æœå¦‚ä¸‹: äº”. ä¸»è¦ä»£ç 5.1 main.cpp123456789101112131415161718192021222324252627282930313233#define GLFW_INCLUDE_VULKAN#include &lt;GLFW/glfw3.h&gt;#define GLM_FORCE_RADIANS#define GLM_FORCE_DEPTH_ZERO_TO_ONE#include &lt;glm/vec4.hpp&gt;#include &lt;glm/mat4x4.hpp&gt;#include &lt;iostream&gt;int main() &#123; glfwInit(); glfwWindowHint(GLFW_CLIENT_API, GLFW_NO_API); GLFWwindow* window = glfwCreateWindow(800, 600, &quot;Vulkan window&quot;, nullptr, nullptr); uint32_t extensionCount = 0; vkEnumerateInstanceExtensionProperties(nullptr, &amp;extensionCount, nullptr); std::cout &lt;&lt; extensionCount &lt;&lt; &quot; extensions supported&quot; &lt;&lt; std::endl; glm::mat4 matrix; glm::vec4 vec; auto test = matrix * vec; while(!glfwWindowShouldClose(window)) &#123; glfwPollEvents(); &#125; glfwDestroyWindow(window); glfwTerminate(); return 0;&#125; 5.2 Makefile12345678910111213141516VULKAN_SDK_PATH = /home/jh/Program/vulkan/1.1.160.0/x86_64CFLAGS = -std=c++17 -I$(VULKAN_SDK_PATH)/includeLDFLAGS = -L$(VULKAN_SDK_PATH)/lib -lvulkan `pkg-config --static --libs glfw3`LDFLAGS += -ldlVulkanTest: main.cpp g++ $(CFLAGS) -o VulkanTest main.cpp $(LDFLAGS).PHONY: test cleantest: VulkanTest LD_LIBRARY_PATH=$(VULKAN_SDK_PATH)/lib VK_LAYER_PATH=$(VULKAN_SDK_PATH)/etc/explicit_layer.d ./VulkanTestclean:rm -f VulkanTest","categories":[{"name":"å›¾åƒå¼•æ“","slug":"å›¾åƒå¼•æ“","permalink":"https://swallowjoe.github.io/categories/%E5%9B%BE%E5%83%8F%E5%BC%95%E6%93%8E/"}],"tags":[{"name":"Vulkan","slug":"Vulkan","permalink":"https://swallowjoe.github.io/tags/Vulkan/"}]}],"categories":[{"name":"å›¾åƒå¼•æ“","slug":"å›¾åƒå¼•æ“","permalink":"https://swallowjoe.github.io/categories/%E5%9B%BE%E5%83%8F%E5%BC%95%E6%93%8E/"}],"tags":[{"name":"Vulkan","slug":"Vulkan","permalink":"https://swallowjoe.github.io/tags/Vulkan/"}]}